<html>

<head>
    <style>
        table {
            border-collapse: collapse;
        }

        td {
            border: 3px solid black;
            width: 300px;
            height: 50px;
        }
    </style>
</head>

<body>
    <label class="switch-button">
        <input type="checkbox" id="time90" />
        <span class="onoff-switch"></span>
    </label>

    <table>
    </table>

    <script>
        // 테이블 요소 선택
        var table = document.querySelector('table');

        // 카운터 초기화
        var counter_tr = -1;
        var counter_th = 0;

        // 행을 28개 생성
        for (var i = 0; i < 24; i++) {
            var tr = document.createElement('tr');
            counter_tr++;
            counter_th = 0;

            // 각 행에 5개의 셀 생성
            for (var j = 0; j < 6; j++) {
                var td = document.createElement('td');
                td.id = counter_tr + counter_th; // 현재 카운터 값을 ID로 설정
                if (td.id == 24) {
                    td.textContent = "월요일"
                }
                else if (td.id == 48) {
                    td.textContent = "화요일"
                }
                else if (td.id == 72) {
                    td.textContent = "수요일"
                }
                else if (td.id == 96) {
                    td.textContent = "목요일"
                }
                else if (td.id == 120) {
                    td.textContent = "금요일"
                }
                counter_th += 24;
                td.style.backgroundColor = 'white';
                tr.appendChild(td);
            }
            table.appendChild(tr);
        }

        const cells = document.querySelectorAll('td');
        const checkbox = document.getElementById('time90');


        function setCellsToGray() {
            cells.forEach(cell => {
                if (cell.style.backgroundColor !== 'rgb(0, 48, 242)') {
                    if (checkbox.checked) {
                        if (cell.id % 24 == 1 || cell.id % 24 == 2 || cell.id % 24 == 3 || cell.id % 24 == 7 || cell.id % 24 == 8 || cell.id % 24 == 9 || cell.id % 24 == 13 || cell.id % 24 == 14 || cell.id % 24 == 15 || cell.id % 24 == 19 || cell.id % 24 == 21 || cell.id % 24 == 23) {
                            cell.style.backgroundColor = ('#c3c3c3');
                        }
                        else {
                            cell.style.backgroundColor = ('');
                        }
                    }
                    else {

                        if ((cell.id % 24 == 1 || cell.id % 24 == 2 || cell.id % 24 == 5 || cell.id % 24 == 6 || cell.id % 24 == 9 || cell.id % 24 == 10 || cell.id % 24 == 13 || cell.id % 24 == 14 || cell.id % 24 == 17 || cell.id % 24 == 18 || cell.id % 24 == 20 || cell.id % 24 == 22)) {
                            cell.style.backgroundColor = ('#c3c3c3');
                        }
                        else {
                            cell.style.backgroundColor = ('');
                        }

                    }
                }
            })
        }

        function show_time() {
            cells.forEach(cell => {
                if (checkbox.checked) {
                    if (cell.id == 1) {
                        cell.textContent = "1-2a";
                    }
                    else if (cell.id == 4) {
                        cell.textContent = "2b-3";
                    }
                    else if (cell.id == 7) {
                        cell.textContent = "4-5a";
                    }
                    else if (cell.id == 10) {
                        cell.textContent = "5b-6";
                    }
                    else if (cell.id == 13) {
                        cell.textContent = "7-8a";
                    }
                    else if (cell.id == 16) {
                        cell.textContent = "8b-9";
                    }
                    else if (cell.id == 19) {
                        cell.textContent = "야1";
                    }
                    else if (cell.id == 20) {
                        cell.textContent = "야2";
                    }
                    else if (cell.id == 21) {
                        cell.textContent = "야3";
                    }
                    else if (cell.id == 22) {
                        cell.textContent = "야4";
                    }
                    else if (cell.id == 23) {
                        cell.textContent = "야5";
                    }
                    else if (cell.id == 3) {
                        cell.textContent = ""
                    }
                    else if (cell.id == 5) {
                        cell.textContent = ""
                    }
                    else if (cell.id == 9) {
                        cell.textContent = ""
                    }
                    else if (cell.id == 11) {
                        cell.textContent = ""
                    }
                    else if (cell.id == 15) {
                        cell.textContent = ""
                    }
                    else if (cell.id == 17) {
                        cell.textContent = ""
                    }
                }
                else {
                    if (cell.id == 1) {
                        cell.textContent = "1";
                    }
                    else if (cell.id == 3) {
                        cell.textContent = "2"
                    }
                    else if (cell.id == 5) {
                        cell.textContent = "3"
                    }
                    else if (cell.id == 7) {
                        cell.textContent = "4"
                    }
                    else if (cell.id == 9) {
                        cell.textContent = "5"
                    }
                    else if (cell.id == 11) {
                        cell.textContent = "6"
                    }
                    else if (cell.id == 13) {
                        cell.textContent = "7"
                    }
                    else if (cell.id == 15) {
                        cell.textContent = "8"
                    }
                    else if (cell.id == 17) {
                        cell.textContent = "9"
                    }
                    else if (cell.id == 19) {
                        cell.textContent = "야1"
                    }
                    else if (cell.id == 20) {
                        cell.textContent = "야2"
                    }
                    else if (cell.id == 21) {
                        cell.textContent = "야3"
                    }
                    else if (cell.id == 22) {
                        cell.textContent = "야4"
                    }
                    else if (cell.id == 23) {
                        cell.textContent = "야5"
                    }
                    else if (cell.id == 4) {
                        cell.textContent = "";
                    }
                    else if (cell.id == 10) {
                        cell.textContent = "";
                    }
                    else if (cell.id == 16) {
                        cell.textContent = "";
                    }
                }
            })
        }

        checkbox.addEventListener('click', () => {
            setCellsToGray();
            show_time();
        })

        setCellsToGray();
        show_time();
        
        cells.forEach(cell => {
            cell.addEventListener('click', () => {
                if (checkbox.checked) {
                    if ((cell.id >= 25 && cell.id <= 42) || (cell.id >= 49 && cell.id <= 66) || (cell.id >= 73 && cell.id <= 90) || (cell.id >= 97 && cell.id <= 114) || (cell.id >= 121 && cell.id <= 138)) {
                        if (cell.id % 3 === 1) {
                            if (cell.style.backgroundColor !== 'rgb(0, 48, 242)') {
                                cell.style.backgroundColor = '#0030f2';
                                document.getElementById(Number(cell.id) + 1).style.backgroundColor = '#0030f2';
                                document.getElementById(Number(cell.id) + 2).style.backgroundColor = '#0030f2';
                            }
                            else {
                                cell.style.backgroundColor = '';
                                document.getElementById(Number(cell.id) + 1).style.backgroundColor = '';
                                document.getElementById(Number(cell.id) + 2).style.backgroundColor = '';
                            }
                        }
                        else if (cell.id % 3 === 2) {
                            if (cell.style.backgroundColor !== 'rgb(0, 48, 242)') {
                                cell.style.backgroundColor = '#0030f2';
                                document.getElementById(Number(cell.id) - 1).style.backgroundColor = '#0030f2';
                                document.getElementById(Number(cell.id) + 1).style.backgroundColor = '#0030f2';
                            }
                            else {
                                cell.style.backgroundColor = '';
                                document.getElementById(Number(cell.id) - 1).style.backgroundColor = '';
                                document.getElementById(Number(cell.id) + 1).style.backgroundColor = '';
                            }
                        }
                        else {
                            if (cell.style.backgroundColor !== 'rgb(0, 48, 242)') {
                                cell.style.backgroundColor = '#0030f2';
                                document.getElementById(Number(cell.id) - 1).style.backgroundColor = '#0030f2';
                                document.getElementById(Number(cell.id) - 2).style.backgroundColor = '#0030f2';
                            }
                            else {
                                cell.style.backgroundColor = '';
                                document.getElementById(Number(cell.id) - 1).style.backgroundColor = '';
                                document.getElementById(Number(cell.id) - 2).style.backgroundColor = '';
                            }
                        }
                    }
                    else if ((cell.id >= 43 && cell.id <= 47) || (cell.id >= 67 && cell.id <= 71) || (cell.id >= 91 && cell.id <= 95) || (cell.id >= 115 && cell.id <= 119) || (cell.id >= 139 && cell.id <= 143)) {
                        if (cell.style.backgroundColor !== 'rgb(0, 48, 242)') {
                            cell.style.backgroundColor = '#0030f2';
                        }
                        else {
                            cell.style.backgroundColor = '';
                        }
                    }
                }
                else {
                    if ((cell.id >= 25 && cell.id <= 42) || (cell.id >= 49 && cell.id <= 66) || (cell.id >= 73 && cell.id <= 90) || (cell.id >= 97 && cell.id <= 114) || (cell.id >= 121 && cell.id <= 138)) {
                        if (cell.id % 2 === 1) {
                            if (cell.style.backgroundColor !== 'rgb(0, 48, 242)') {
                                cell.style.backgroundColor = '#0030f2';
                                document.getElementById(Number(cell.id) + 1).style.backgroundColor = '#0030f2';
                            }
                            else {
                                cell.style.backgroundColor = '';
                                document.getElementById(Number(cell.id) + 1).style.backgroundColor = '';
                            }
                        }
                        else {
                            if (cell.style.backgroundColor !== 'rgb(0, 48, 242)') {
                                cell.style.backgroundColor = '#0030f2';
                                document.getElementById(Number(cell.id) - 1).style.backgroundColor = '#0030f2';
                            }
                            else {
                                cell.style.backgroundColor = '';
                                document.getElementById(Number(cell.id) - 1).style.backgroundColor = '';
                            }
                        }
                    }
                    else if ((cell.id >= 43 && cell.id <= 47) || (cell.id >= 67 && cell.id <= 71) || (cell.id >= 91 && cell.id <= 95) || (cell.id >= 115 && cell.id <= 119) || (cell.id >= 139 && cell.id <= 143)) {
                        if (cell.style.backgroundColor !== 'rgb(0, 48, 242)') {
                            cell.style.backgroundColor = '#0030f2';
                        }
                        else {
                            cell.style.backgroundColor = '';
                        }

                    }

                }
                setCellsToGray();
            });
        });

        // Function to handle button click and display colored cell positions
        function displayColoredCellPositions() {

            const coloredCells = document.querySelectorAll('td[style*="background-color: rgb(0, 48, 242)"]');

            const index = [];
            coloredCells.forEach(cell => {
                index.push(Number(cell.id));
            });

            const idx = [];
            console.log(index)
            for (let i = 0; i < index.length; i++) {
                switch (index[i]) {
                    case 0:
                        idx.push('011');
                        break;
                    case 1:
                        idx.push('012');
                        break;
                    case 2:
                        idx.push('021');
                        break;
                    case 3:
                        idx.push('022');
                        break;
                    case 4:
                        idx.push('031');
                        break;
                    case 5:
                        idx.push('032');
                        break;
                    case 6:
                        idx.push('041');
                        break;
                    case 7:
                        idx.push('042');
                        break;
                    case 8:
                        idx.push('051');
                        break;
                    case 9:
                        idx.push('052');
                        break;
                    case 10:
                        idx.push('061');
                        break;
                    case 11:
                        idx.push('062');
                        break;
                    case 12:
                        idx.push('071');
                        break;
                    case 13:
                        idx.push('072');
                        break;
                    case 14:
                        idx.push('081');
                        break;
                    case 15:
                        idx.push('082');
                        break;
                    case 16:
                        idx.push('091');
                        break;
                    case 17:
                        idx.push('092');
                        break;
                    case 18:
                        idx.push('510');
                        break;
                    case 19:
                        idx.push('520');
                        break;
                    case 20:
                        idx.push('530');
                        break;
                    case 21:
                        idx.push('540');
                        break;
                    case 22:
                        idx.push('550');
                        break;
                    case 23:
                        idx.push('111');
                        break;
                    case 24:
                        idx.push('112');
                        break;
                    case 25:
                        idx.push('121');
                        break;
                    case 26:
                        idx.push('122');
                        break;
                    case 27:
                        idx.push('131');
                        break;
                    case 28:
                        idx.push('132');
                        break;
                    case 29:
                        idx.push('141');
                        break;
                    case 30:
                        idx.push('142');
                        break;
                    case 31:
                        idx.push('151');
                        break;
                    case 32:
                        idx.push('152');
                        break;
                    case 33:
                        idx.push('161');
                        break;
                    case 34:
                        idx.push('162');
                        break;
                    case 35:
                        idx.push('171');
                        break;
                    case 36:
                        idx.push('172');
                        break;
                    case 37:
                        idx.push('181');
                        break;
                    case 38:
                        idx.push('182');
                        break;
                    case 39:
                        idx.push('191');
                        break;
                    case 40:
                        idx.push('192');
                        break;
                    case 41:
                        idx.push('610');
                        break;
                    case 42:
                        idx.push('620');
                        break;
                    case 43:
                        idx.push('630');
                        break;
                    case 44:
                        idx.push('640');
                        break;
                    case 45:
                        idx.push('650');
                        break;
                    case 46:
                        idx.push('211');
                        break;
                    case 47:
                        idx.push('212');
                        break;
                    case 48:
                        idx.push('221');
                        break;
                    case 49:
                        idx.push('222');
                        break;
                    case 50:
                        idx.push('231');
                        break;
                    case 51:
                        idx.push('232');
                        break;
                    case 52:
                        idx.push('241');
                        break;
                    case 53:
                        idx.push('242');
                    case 54:
                        idx.push('251');
                        break;
                    case 55:
                        idx.push('252');
                        break;
                    case 56:
                        idx.push('261');
                        break;
                    case 57:
                        idx.push('262');
                        break;
                    case 58:
                        idx.push('271');
                        break;
                    case 59:
                        idx.push('272');
                        break;
                    case 60:
                        idx.push('281');
                        break;
                    case 61:
                        idx.push('282');
                        break;
                    case 62:
                        idx.push('291');
                        break;
                    case 63:
                        idx.push('292');
                        break;
                    case 64:
                        idx.push('710');
                        break;
                    case 65:
                        idx.push('720');
                        break;
                    case 66:
                        idx.push('730');
                        break;
                    case 67:
                        idx.push('740');
                        break;
                    case 68:
                        idx.push('750');
                        break;
                    case 69:
                        idx.push('311');
                        break;
                    case 70:
                        idx.push('312');
                        break;
                    case 71:
                        idx.push('321');
                        break;
                    case 72:
                        idx.push('322');
                        break;
                    case 73:
                        idx.push('331');
                        break;
                    case 74:
                        idx.push('332');
                        break;
                    case 75:
                        idx.push('341');
                        break;
                    case 76:
                        idx.push('342');
                        break;
                    case 77:
                        idx.push('351');
                        break;
                    case 78:
                        idx.push('352');
                        break;
                    case 79:
                        idx.push('361');
                        break;
                    case 80:
                        idx.push('362');
                        break;
                    case 81:
                        idx.push('371');
                        break;
                    case 82:
                        idx.push('372');
                        break;
                    case 83:
                        idx.push('381');
                        break;
                    case 84:
                        idx.push('382');
                        break;
                    case 85:
                        idx.push('391');
                        break;
                    case 86:
                        idx.push('392');
                        break;
                    case 87:
                        idx.push('810');
                        break;
                    case 88:
                        idx.push('820');
                        break;
                    case 89:
                        idx.push('830');
                        break;
                    case 90:
                        idx.push('840');
                        break;
                    case 91:
                        idx.push('850');
                        break;
                    case 92:
                        idx.push('411');
                        break;
                    case 93:
                        idx.push('412');
                        break;
                    case 94:
                        idx.push('421');
                        break;
                    case 95:
                        idx.push('422');
                        break;
                    case 96:
                        idx.push('431');
                        break;
                    case 97:
                        idx.push('432');
                        break;
                    case 98:
                        idx.push('441');
                        break;
                    case 99:
                        idx.push('442');
                        break;
                    case 100:
                        idx.push('451');
                        break;
                    case 101:
                        idx.push('452');
                        break;
                    case 102:
                        idx.push('461');
                        break;
                    case 103:
                        idx.push('462');
                        break;
                    case 104:
                        idx.push('471');
                        break;
                    case 105:
                        idx.push('472');
                        break;
                    case 106:
                        idx.push('481');
                        break;
                    case 107:
                        idx.push('482');
                        break;
                    case 108:
                        idx.push('491');
                        break;
                    case 109:
                        idx.push('492');
                        break;
                    case 110:
                        idx.push('910');
                        break;
                    case 111:
                        idx.push('920');
                        break;
                    case 112:
                        idx.push('930');
                        break;
                    case 113:
                        idx.push('940');
                        break;
                    case 114:
                        idx.push('950');
                        break;
                }
            };

            fetch('/next_to_test', {
                method: 'post',
                headers: {
                    'content-type': 'application/json'
                },
                body: JSON.stringify({
                    idx: idx
                })
            })

            location.href = '#List';


        }
    </script>
    <!-- Button to display colored cell positions -->
    <button onclick="displayColoredCellPositions()">확인</button>
</body>

</html>
